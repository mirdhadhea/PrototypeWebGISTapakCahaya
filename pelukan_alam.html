<!doctype html>
<html lang="id">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Pelukan Alam — Desa Gaya Baru</title>

<!-- FONT -->
<link href="https://fonts.googleapis.com/css2?family=Outfit:wght@100..900&display=swap" rel="stylesheet">

<!-- SWIPER & LEAFLET -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css">
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" crossorigin>
<link rel="stylesheet" href="https://unpkg.com/leaflet-routing-machine@latest/dist/leaflet-routing-machine.css">

<style>
/* ==== CSS GABUNGAN (rapi & siap pakai) ==== */
@import url('https://fonts.googleapis.com/css2?family=Outfit:wght@100..900&display=swap');
:root{--bg:#7ba6ac;--ink:#ffe9c4;--teal:#ff7e6d;--teal-2:#ff7e6d;--white:#fff;--muted:color-mix(in srgb,var(--ink)70%,var(--bg)30%);--menu-edge-gap:14px;--header-xpad:8px;--menu-gap:42px;--logo-size:50px;--header-py:30px;--brand-left-gap:16px;--footer-bg:#1e365a;--footer-max:min(1100px,92%);--footer-accent:#fff;--footer-text:#fff;--story-max:min(1100px,92%);--story-media-w:clamp(380px,46vw,620px);--story-gap:clamp(12px,1.6vw,28px);--img-overlap:clamp(-64px,-5vw,-24px);--text-overlap-right:clamp(-72px,-4.8vw,-32px);--text-overlap-left:clamp(-72px,-4.8vw,-32px)}
*{box-sizing:border-box}
*,*::before,*::after{font-family:inherit}
body{margin:0;font-family:"Outfit",system-ui,-apple-system,"Segoe UI",Roboto,Arial,sans-serif;color:var(--ink);background:var(--bg)}
input,textarea,select,button{font:inherit}

/* Container & footer util (opsional untuk halaman lain) */
.container{width:min(1100px,92%);margin-inline:auto}

/* ====== HERO SLIDER (Pelukan Alam) ====== */
.pelukan-alam{position:relative;width:100%;padding:clamp(12px,2vw,24px) 0;background:var(--bg)}
.pelukan-slider{width:min(1200px,96%);height:clamp(68vh,78vh,82vh);margin-inline:auto}
.swiper-slide{position:relative;width:clamp(240px,36vw,540px);height:100%;display:flex;align-items:center;justify-content:center;overflow:hidden;border-radius:18px}
.swiper-slide img{width:100%;height:100%;object-fit:cover;transform:scale(1.02);filter:brightness(82%)}
.swiper-slide::after{content:"";position:absolute;inset:0;background:linear-gradient(180deg,rgba(0,0,0,.10) 0%,rgba(0,0,0,.25) 38%,rgba(0,0,0,.55) 100%);pointer-events:none}
.slide-caption{position:absolute;z-index:2;bottom:14%;left:50%;transform:translateX(-50%);text-align:center;color:#fff;padding:.9rem 1.4rem;border-radius:14px;background:rgba(0,0,0,.28);backdrop-filter:blur(4px);max-width:min(86%,680px)}
.slide-caption h2{margin:0 0 .25rem;font-weight:800;letter-spacing:.4px;font-size:clamp(26px,4.2vw,54px);line-height:1.05}
.slide-caption p{margin:0;font-size:clamp(14px,1.3vw,18px);line-height:1.6;opacity:.96}
.pelukan-slider .swiper-pagination{position:absolute;left:0;right:0;bottom:clamp(14px,3vh,22px);display:flex;justify-content:center;align-items:center;gap:10px}
.pelukan-slider .swiper-pagination-bullet{width:10px;height:10px;background:rgba(255,255,255,.45);opacity:1;border-radius:999px;transition:width .22s ease,background .22s ease,opacity .22s ease}
.pelukan-slider .swiper-pagination-bullet.swiper-pagination-bullet-active{width:36px;height:12px;background:#fff;opacity:1;border-radius:999px}
.pelukan-slider .swiper-button-prev,.pelukan-slider .swiper-button-next{position:absolute;top:50%;translate:0 -50%;z-index:5;width:56px;height:56px;border-radius:999px;background:rgba(0,0,0,.18);border:1px solid rgba(255,255,255,.45);box-shadow:none;color:#fff;display:grid;place-items:center;cursor:pointer;backdrop-filter:blur(2px);transition:background .2s ease,border-color .2s ease,transform .2s ease}
.pelukan-slider .swiper-button-prev{left:clamp(10px,2.2vw,26px)}
.pelukan-slider .swiper-button-next{right:clamp(10px,2.2vw,26px)}
.pelukan-slider .swiper-button-prev::after,.pelukan-slider .swiper-button-next::after{font-size:18px;font-weight:900}
.pelukan-slider .swiper-button-prev:hover,.pelukan-slider .swiper-button-next:hover{background:rgba(255,255,255,.12);border-color:rgba(255,255,255,.6)}

/* ====== Intro Kalimat ====== */
.intro-wisata{width:min(900px,92%);margin:clamp(24px,4vw,42px) auto;text-align:center;color:#1E365A;font:600 clamp(22px,2.6vw,24px)/1.55 "Outfit",system-ui;background:radial-gradient(ellipse at top center,rgba(255,255,255,0.25) 0%,rgba(255,255,255,0) 70%)}
.intro-wisata p{margin:0;font-weight:600;letter-spacing:.3px;font-size:clamp(18px,2vw,22px);line-height:1.8;color:#1E365A;position:relative}

/* ====== Kartu Kekayaan Alam ====== */
.stay-list{position:relative;width:min(1200px,96%);margin:clamp(32px,4vw,56px) auto;padding:clamp(22px,3vw,34px);border-radius:22px;background:rgba(123,166,172,0.55);border:2px solid rgba(255,255,255,.20);box-shadow:0 18px 48px rgba(0,0,0,.14);backdrop-filter:blur(8px) saturate(120%)}
.stay-list .container{width:min(1050px,92%);margin:0 auto;display:flex;flex-direction:column;align-items:center;gap:clamp(16px,2vw,22px)}
.stay-title{display:inline-block;text-align:center;margin:2px 0 12px;padding:10px 28px;font:900 clamp(26px,3.6vw,36px)/1.2 "Outfit",system-ui;letter-spacing:.3px;color:#1E365A;background:#fff;border-radius:14px;box-shadow:0 6px 12px rgba(0,0,0,.08);border:1px solid #3E6778}
.alam-grid{width:100%;display:grid;grid-template-columns:repeat(3,1fr);gap:clamp(14px,1.8vw,22px);align-items:stretch}
.alam-card{background:#FFFDF7;border:1.2px solid #3E6778;border-radius:18px;overflow:hidden;box-shadow:0 8px 18px rgba(0,0,0,.06);display:flex;flex-direction:column;min-height:420px;transition:transform .16s ease,box-shadow .16s ease}
.alam-card:hover{transform:translateY(-2px);box-shadow:0 14px 28px rgba(0,0,0,.10)}
.alam-media{width:100%;aspect-ratio:16/11;object-fit:cover;display:block}
.alam-body{display:flex;flex-direction:column;gap:10px;padding:14px 16px 16px}
.alam-name{margin:2px 0 4px;font:800 18px/1.2 "Outfit",system-ui;color:#1E365A}
.alam-sub{margin:0;font-size:14px;text-align:justify;text-justify:inter-word;width:100%;padding:12px 16px;border-radius:12px;background:#FF7E6D;color:#fff;line-height:1.55;box-shadow:inset 0 1px 0 rgba(255,255,255,.2)}

/* ====== Peta Wisata ====== */
.map-section{padding:clamp(24px,3.2vw,36px) 0;background:transparent}
.map-section .container{width:min(1200px,96%);margin:0 auto}
.map-section .section-title{display:inline-flex;align-items:center;gap:10px;margin:0 0 12px;padding:10px 22px;font:900 clamp(22px,3.4vw,32px)/1.1 "Outfit",system-ui;color:#fff;background:#1E365A;border:1px solid rgba(255,255,255,.28);border-radius:14px;box-shadow:0 8px 22px rgba(0,0,0,.22)}
.map-frame{margin-inline:auto;padding:12px;border-radius:16px;background:none;border:1px solid rgba(255,255,255,.35);box-shadow:0 14px 38px rgba(0,0,0,.18)}
#leaflet-map{width:100%;height:520px;border-radius:14px;border:1px solid rgba(0,0,0,.06);box-shadow:0 2px 0 rgba(255,255,255,.35) inset;outline:none}
.leaflet-control-zoom,.leaflet-control-layers{border-radius:12px!important;border:0!important;background:rgba(255,255,255,.55)!important;box-shadow:0 8px 18px rgba(0,0,0,.15)!important}
.leaflet-routing-container{display:none!important}

/* ====== Badge Jarak ====== */
.distance-badge-pin{background:#1f2937;color:#fff;padding:6px 10px;border-radius:10px;border:1px solid rgba(255,255,255,.25);box-shadow:0 6px 18px rgba(0,0,0,.35);font:700 12px/1 system-ui,Arial,sans-serif;white-space:nowrap}

/* ====== Responsif ====== */
@media (max-width:900px){
  .alam-grid{grid-template-columns:1fr}
}
</style>
</head>
<body>

<!-- ====== SLIDER PELUKAN ALAM ====== -->
<section class="pelukan-alam">
  <div class="swiper pelukan-slider">
    <div class="swiper-wrapper">
      <div class="swiper-slide">
        <img src="./kacimbola.png" alt="Pantai Kacimbola">
        <div class="slide-caption">
          <h2>Pantai Kacimbola</h2>
          <p>Hamparan pasir putih berpadu dengan birunya Laut Flores, memantulkan kilau keemasan saat pagi hari.</p>
        </div>
      </div>
      <div class="swiper-slide">
        <img src="./waburi.png" alt="Waburi Park">
        <div class="slide-caption">
          <h2>Waburi Park</h2>
          <p>Taman di puncak tebing dengan panorama laut membentang—tempat terbaik menyaksikan matahari terbenam.</p>
        </div>
      </div>
      <div class="swiper-slide">
        <img src="./kunawe.png" alt="Ceruk Konawe">
        <div class="slide-caption">
          <h2>Ceruk Konawe</h2>
          <p>Gua alami bertuah peninggalan prasejarah: cap tangan, pola garis, dan temuan sisa tulang manusia.</p>
        </div>
      </div>
    </div>
    <div class="swiper-button-prev"></div>
    <div class="swiper-button-next"></div>
    <div class="swiper-pagination"></div>
  </div>
</section>

<div class="intro-wisata">
  <p>Keindahan alam Gaya Baru terpancar dari destinasi, laut, flora, dan faunanya—menjadi sumber kehidupan dan kebanggaan.</p>
</div>

<!-- ====== KEKAYAAN LAUT ====== -->
<section class="stay-list" style="isolation:isolate">
  <div class="container" style="position:relative;z-index:1">
    <h2 class="stay-title">Kekayaan Laut</h2>
    <div class="alam-grid">
      <article class="alam-card">
        <img src="./cakalang.png" alt="Ikan Cakalang" class="alam-media">
        <div class="alam-body">
          <h3 class="alam-name">Ikan Cakalang</h3>
          <p class="alam-sub">Daging padat dan gurih; tangkapan utama nelayan Gaya Baru sekaligus simbol ketekunan pesisir.</p>
        </div>
      </article>
      <article class="alam-card">
        <img src="./tuna.png" alt="Ikan Tuna" class="alam-media">
        <div class="alam-body">
          <h3 class="alam-name">Ikan Tuna</h3>
          <p class="alam-sub">Raja samudra; perairan Gaya Baru menjadi jalur migrasi—andalan perikanan berkelanjutan.</p>
        </div>
      </article>
      <article class="alam-card">
        <img src="./tongkol.png" alt="Ikan Tongkol" class="alam-media">
        <div class="alam-body">
          <h3 class="alam-name">Ikan Tongkol</h3>
          <p class="alam-sub">Tangguh dan adaptif; komoditas pangan yang mencerminkan keseimbangan kebutuhan dan kelestarian.</p>
        </div>
      </article>
    </div>
  </div>
</section>

<!-- ====== KEKAYAAN FLORA ====== -->
<section class="stay-list">
  <div class="container">
    <h2 class="stay-title">Kekayaan Flora</h2>
    <div class="alam-grid">
      <article class="alam-card">
        <img src="./rotan.png" alt="Rotan Batang" class="alam-media">
        <div class="alam-body">
          <h3 class="alam-name">Rotan Batang</h3>
          <p class="alam-sub">Lentur namun kuat; bahan penting kerajinan—harmoni alam dan budaya lokal.</p>
        </div>
      </article>
      <article class="alam-card">
        <img src="./terumbu.png" alt="Terumbu Karang" class="alam-media">
        <div class="alam-body">
          <h3 class="alam-name">Terumbu Karang</h3>
          <p class="alam-sub">Taman bawah laut penuh warna—benteng alami pesisir dan surga bagi penyelam.</p>
        </div>
      </article>
      <article class="alam-card">
        <img src="./anggrek.png" alt="Anggrek Serat" class="alam-media">
        <div class="alam-body">
          <h3 class="alam-name">Anggrek Serat</h3>
          <p class="alam-sub">Permata hutan dengan kelopak halus; daya pikat botani di lereng lembap.</p>
        </div>
      </article>
    </div>
  </div>
</section>

<!-- ====== KEKAYAAN FAUNA ====== -->
<section class="stay-list">
  <div class="container">
    <h2 class="stay-title">Kekayaan Fauna</h2>
    <div class="alam-grid">
      <article class="alam-card">
        <img src="./kangkareng.png" alt="Kangkareng Sulawesi" class="alam-media">
        <div class="alam-body">
          <h3 class="alam-name">Kangkareng Sulawesi</h3>
          <p class="alam-sub">Paruh besar, suara nyaring; penyebar biji yang menjaga regenerasi hutan tropis.</p>
        </div>
      </article>
      <article class="alam-card">
        <img src="./macaca.png" alt="Monyet Macaca" class="alam-media">
        <div class="alam-body">
          <h3 class="alam-name">Monyet Macaca</h3>
          <p class="alam-sub">Primata cerdas hidup berkelompok—indikator ekosistem yang terjaga.</p>
        </div>
      </article>
      <article class="alam-card">
        <img src="./maleo.png" alt="Burung Maleo" class="alam-media">
        <div class="alam-body">
          <h3 class="alam-name">Burung Maleo</h3>
          <p class="alam-sub">Endemik Sulawesi; bertelur di pasir panas—nilai konservasi tinggi bagi ekowisata.</p>
        </div>
      </article>
    </div>
  </div>
</section>

<!-- ====== PETA WISATA ====== -->
<section class="map-section" id="peta">
  <div class="container">
    <h2 class="section-title">Peta Tempat Wisata</h2>
    <div class="map-frame"><div id="leaflet-map"></div></div>
  </div>
</section>

<!-- JS: Swiper, Leaflet, LRM, shpjs -->
<script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" crossorigin></script>
<script src="https://unpkg.com/leaflet-routing-machine@latest/dist/leaflet-routing-machine.js"></script>
<script src="https://unpkg.com/shpjs@latest/dist/shp.min.js"></script>

<script>
/* ====== Inisialisasi Swiper ====== */
new Swiper(".pelukan-slider",{
  loop:true,speed:700,grabCursor:true,effect:"coverflow",centeredSlides:true,slidesPerView:"auto",spaceBetween:40,
  coverflowEffect:{rotate:0,stretch:0,depth:180,modifier:1.2,slideShadows:false},
  navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},
  pagination:{el:".swiper-pagination",clickable:true},
  autoplay:{delay:5000,disableOnInteraction:false},
  breakpoints:{320:{spaceBetween:16},640:{spaceBetween:24},1024:{spaceBetween:40}}
});

/* ====== Peta Leaflet + Routing + Tutupan Lahan (shpjs) ====== */
document.addEventListener("DOMContentLoaded",async()=>{
  if(!window.L) return;

  // Basemap
  const osm = L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19});
  const topo= L.tileLayer("https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png",{maxZoom:17});
  const sat = L.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{maxZoom:19});

  const map = L.map("leaflet-map",{center:[-5.66,122.76],zoom:13,layers:[osm]});
  const layerControl=L.control.layers({OSM:osm,Topografi:topo,Satelit:sat},null,{position:"topright",collapsed:true}).addTo(map);

  // Titik wisata
  const locations=[
    {name:"Waburi Park",     coords:[-5.663294086295358,122.76500923206746]},
    {name:"Pantai Kacimbola",coords:[-5.657579664077717,122.7610348916279]},
    {name:"Ceruk Konawe",    coords:[-5.669443346244777,122.76431883050331]}
  ];
  locations.forEach(l=>L.marker(l.coords).addTo(map).bindPopup(`<b>${l.name}</b>`));

  const byName=n=>locations.find(o=>o.name===n);
  const fmtKm=m=>`Jarak: ${(m/1000).toFixed(1)} km`;
  const midpointOnLine=latlngs=>{
    if(!latlngs||latlngs.length<2)return latlngs?.[0];
    let total=0,seg=[];
    for(let i=1;i<latlngs.length;i++){const d=latlngs[i-1].distanceTo(latlngs[i]);seg.push(d);total+=d}
    const half=total/2; let acc=0;
    for(let i=1;i<latlngs.length;i++){
      if(acc+seg[i-1]>=half){
        const t=(half-acc)/seg[i-1],a=latlngs[i-1],b=latlngs[i];
        return L.latLng(a.lat+t*(b.lat-a.lat),a.lng+t*(b.lng-a.lng))
      }
      acc+=seg[i-1]
    }
    return latlngs[Math.floor(latlngs.length/2)]
  };

  // Warna tutupan lahan
  const norm=s=>String(s||"").toLowerCase().replace(/\s+/g," ").trim();
  const colorFor=leg=>{
    const c=norm(leg), exact={
      "permukiman":{stroke:"#000",fill:"#FFCCBF"},
      "belukar":{stroke:"#000",fill:"#A6FF78"},
      "tanah terbuka":{stroke:"#000",fill:"#ffffff"},
      "savana / padang rumput":{stroke:"#000",fill:"#66BF3B"},
      "kebun campuran":{stroke:"#000",fill:"#BDFFA1"},
      "hutan lahan kering":{stroke:"#000",fill:"#C7E0B0"},
      "hutan mangrove":{stroke:"#000",fill:"#A6FF78"},
      "tubuh air":{stroke:"#00FFFF",fill:"#CCFFFF"}
    };
    if(exact[c]) return exact[c];
    if(c.includes("permuk"))return{stroke:"#000",fill:"#FFCCBF"};
    if(c.includes("belukar"))return{stroke:"#000",fill:"#A6FF78"};
    if(c.includes("terbuka"))return{stroke:"#000",fill:"#ffffff"};
    if(c.includes("savana")||c.includes("padang"))return{stroke:"#000",fill:"#66BF3B"};
    if(c.includes("kebun"))return{stroke:"#000",fill:"#BDFFA1"};
    if(c.includes("mangrove"))return{stroke:"#000",fill:"#A6FF78"};
    if(c.includes("hutan"))return{stroke:"#000",fill:"#C7E0B0"};
    if(c.includes("air")||c.includes("sungai")||c.includes("danau"))return{stroke:"#00FFFF",fill:"#CCFFFF"};
    return{stroke:"#ff7b00",fill:"#ffd9ab"}
  };

  // Muat tutupan lahan dari ZIP (taruh file "tuplah.zip" di folder yang sama dengan HTML ini)
  async function loadTutupanLahan(){
    const ab=await fetch("./tuplah.zip").then(r=>{if(!r.ok)throw new Error("Gagal memuat tuplah.zip");return r.arrayBuffer()});
    const gj=await shp(ab);
    const tutupan=L.geoJSON(gj,{
      style:f=>{const c=colorFor(f.properties?.Legenda);return{color:c.stroke,weight:1.2,fillColor:c.fill,fillOpacity:.5}},
      onEachFeature:(f,l)=>{
        const p=f.properties||{},leg=p.Legenda||p.name||"Tutupan Lahan",luas=p.Luas??p.luas??p.LUAS;
        const tip=(luas!=null&&String(luas).trim()!=="")?`${leg} — Luas: ${luas}`:leg;
        l.bindTooltip(tip,{sticky:true});
        l.bindPopup(`<div style="min-width:240px"><div><b>${leg}</b></div>${luas?`<div>Luas: <b>${luas}</b></div>`:""}</div>`)
      }
    }).addTo(map);
    layerControl.addOverlay(tutupan,"Tutupan Lahan");
    try{map.fitBounds(tutupan.getBounds(),{padding:[18,18]})}catch(e){}
    return tutupan;
  }

  // Gambarkan rute dan badge jarak (OSRM)
  function makeRouteOverlay(title,fromName,toName,color="#0b67d0"){
    const A=byName(fromName),B=byName(toName); if(!A||!B) return;
    const group=L.layerGroup();

    L.Routing.control({
      waypoints:[L.latLng(A.coords),L.latLng(B.coords)],
      router:L.Routing.osrmv1({serviceUrl:"https://router.project-osrm.org/route/v1"}),
      showAlternatives:false,fitSelectedRoutes:false,addWaypoints:false,draggableWaypoints:false,routeWhileDragging:false,
      createMarker:()=>null,
      lineOptions:{styles:[{color:"transparent",weight:0,opacity:0}]}
    })
    .on("routesfound",e=>{
      const r=e.routes[0];
      L.polyline(r.coordinates,{color,weight:5,opacity:.9}).addTo(group);
      const mid=midpointOnLine(r.coordinates),txt=fmtKm(r.summary.totalDistance);
      L.marker(mid,{icon:L.divIcon({className:"",html:`<div class="distance-badge-pin">${txt}</div>`,iconSize:null,iconAnchor:[0,0]}),interactive:false}).addTo(group)
    })
    .addTo(map);

    layerControl.addOverlay(group,title); group.addTo(map);
  }

  await loadTutupanLahan();
  makeRouteOverlay("Pantai Kacimbola → Waburi Park","Pantai Kacimbola","Waburi Park","#0b67d0");
  makeRouteOverlay("Waburi Park → Ceruk Konawe","Waburi Park","Ceruk Konawe","#0b67d0");
  L.control.scale({imperial:false}).addTo(map);
});
</script>

</body>
</html>
