<!doctype html>
<html lang="id">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Pelukan Alam ‚Äî Desa Gaya Baru</title>

<!-- Font -->
<link href="https://fonts.googleapis.com/css2?family=Outfit:wght@100..900&display=swap" rel="stylesheet">

<!-- Swiper & Leaflet CSS -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css">
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" crossorigin>
<link rel="stylesheet" href="https://unpkg.com/leaflet-routing-machine@latest/dist/leaflet-routing-machine.css">

<style>
:root{
  --bg:#7ba6ac;--ink:#ffe9c4;--teal:#ff7e6d;
  --footer-bg:#1e365a;--footer-accent:#fff;
}
*{box-sizing:border-box}
body{margin:0;font-family:"Outfit",system-ui,sans-serif;color:var(--ink);background:var(--bg)}
a{text-decoration:none;color:inherit}
img{max-width:100%;display:block}

/* ===== Header ===== */
header.topbar{background:var(--footer-bg);color:var(--ink);padding:18px 0}
.nav{width:min(1100px,92%);margin:auto;display:flex;align-items:center;gap:14px}
.brand{display:flex;align-items:center;gap:10px}
.logo{width:50px;height:50px}
.logo img{width:100%;height:100%;object-fit:contain}
.brand-text{color:#fff;font-weight:800;font-size:20px;line-height:1.1}
.menu{margin-left:auto;display:flex;gap:24px;align-items:center}
.menu a{color:#fff;font-weight:700}
.menu a:hover{opacity:.85}
.menu .cta{background:var(--teal);padding:10px 14px;border-radius:10px;box-shadow:0 6px 14px rgba(0,0,0,.22)}

/* ===== Slider ===== */
.pelukan-alam{position:relative;width:100%;padding:clamp(12px,2vw,24px) 0}
.pelukan-slider{width:min(1200px,96%);height:clamp(68vh,78vh,82vh);margin:auto}
.swiper-slide{position:relative;width:clamp(240px,36vw,540px);height:100%;display:flex;align-items:center;justify-content:center;overflow:hidden;border-radius:18px}
.swiper-slide img{width:100%;height:100%;object-fit:cover;filter:brightness(82%)}
.swiper-slide::after{content:"";position:absolute;inset:0;background:linear-gradient(180deg,rgba(0,0,0,.1),rgba(0,0,0,.55))}
.slide-caption{position:absolute;bottom:14%;left:50%;transform:translateX(-50%);text-align:center;color:#fff;padding:.9rem 1.4rem;border-radius:14px;background:rgba(0,0,0,.28);backdrop-filter:blur(4px);max-width:min(86%,680px)}
.slide-caption h2{margin:0 0 .25rem;font-weight:800;font-size:clamp(26px,4.2vw,54px)}
.slide-caption p{margin:0;font-size:clamp(14px,1.3vw,18px);opacity:.96}
.swiper-button-prev,.swiper-button-next{width:56px;height:56px;border-radius:999px;background:rgba(0,0,0,.18);border:1px solid rgba(255,255,255,.45);color:#fff}
.swiper-pagination-bullet{background:rgba(255,255,255,.45);opacity:1}
.swiper-pagination-bullet-active{background:#fff;width:36px;border-radius:999px}

/* ===== Intro ===== */
.intro-wisata{width:min(900px,92%);margin:40px auto;text-align:center;color:#1E365A;font-weight:600;font-size:clamp(18px,2vw,22px);line-height:1.8}

/* ===== Kartu ===== */
.stay-list{width:min(1200px,96%);margin:50px auto;padding:30px;border-radius:22px;background:rgba(123,166,172,.55);backdrop-filter:blur(8px);box-shadow:0 18px 48px rgba(0,0,0,.14)}
.stay-title{text-align:center;margin-bottom:20px;font-weight:900;font-size:clamp(26px,3.6vw,36px);color:#1E365A;background:#fff;padding:10px 28px;border-radius:14px;display:inline-block}
.alam-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:22px}
.alam-card{background:#fff;border-radius:18px;box-shadow:0 8px 18px rgba(0,0,0,.06);overflow:hidden;display:flex;flex-direction:column;transition:transform .2s ease}
.alam-card:hover{transform:translateY(-2px)}
.alam-media{width:100%;aspect-ratio:16/11;object-fit:cover}
.alam-body{padding:14px 16px}
.alam-name{margin:0 0 8px;font-weight:800;color:#1E365A}
.alam-sub{background:#FF7E6D;color:#fff;padding:10px 14px;border-radius:12px;font-size:14px;line-height:1.5;text-align:justify}

/* ===== Peta ===== */
.map-section{padding:40px 0}
.map-section .container{width:min(1200px,96%);margin:auto}
.section-title{background:#1E365A;color:#fff;padding:10px 22px;border-radius:14px;font-weight:900;display:inline-flex;align-items:center;gap:10px}
.map-frame{margin:auto;padding:10px;border-radius:16px;border:1px solid rgba(255,255,255,.35);box-shadow:0 14px 38px rgba(0,0,0,.18)}
#leaflet-map{width:100%;height:520px;border-radius:14px;border:1px solid rgba(0,0,0,.06)}
.leaflet-control-zoom,.leaflet-control-layers{border-radius:10px!important;background:rgba(255,255,255,.7)!important}
.distance-badge-pin{background:#1f2937;color:#fff;padding:6px 10px;border-radius:10px;border:1px solid rgba(255,255,255,.25);box-shadow:0 6px 18px rgba(0,0,0,.35);font:700 12px/1 system-ui}

/* ===== Footer ===== */
footer{background:var(--footer-bg);color:#fff;padding:30px 0 10px;margin-top:50px}
.footer-grid{width:min(1100px,92%);margin:auto;display:grid;grid-template-columns:1fr 1fr 1fr;gap:24px}
.footer-brand{font-size:28px;font-weight:800;line-height:1.1}
.footer-addr{margin-top:6px;line-height:1.6}
.contact-list{list-style:none;padding:0;margin:0;display:grid;gap:.5rem}
.contact-list a{color:#fff}
.socials{display:flex;gap:12px;margin-top:10px}
.soc{width:40px;height:40px;border-radius:12px;border:2px solid rgba(255,255,255,.45);display:grid;place-items:center}
.soc:hover{background:rgba(255,255,255,.12);border-color:#fff}
.footer-credits{border-top:1px solid rgba(255,255,255,.12);margin-top:10px;padding-top:10px;text-align:center}
@media(max-width:900px){.footer-grid{grid-template-columns:1fr}}
</style>
</head>
<body>

<!-- ===== Header ===== -->
<header class="topbar">
  <div class="nav">
    <div class="brand">
      <span class="logo"><img src="./busel.png" alt="Busel Logo"></span>
      <div class="brand-text">Kabupaten<br>Buton Selatan</div>
    </div>
    <nav class="menu">
      <a href="index.html">Beranda</a>
      <a href="#peta">Peta</a>
      <a href="#kontak" class="cta">Sapa Kami</a>
    </nav>
  </div>
</header>

<!-- ===== Slider ===== -->
<section class="pelukan-alam">
  <div class="swiper pelukan-slider">
    <div class="swiper-wrapper">
      <div class="swiper-slide">
        <img src="./kacimbola.png" alt="Pantai Kacimbola">
        <div class="slide-caption"><h2>Pantai Kacimbola</h2><p>Hamparan pasir putih berpadu dengan birunya Laut Flores, memantulkan kilau keemasan saat pagi hari.</p></div>
      </div>
      <div class="swiper-slide">
        <img src="./waburi.png" alt="Waburi Park">
        <div class="slide-caption"><h2>Waburi Park</h2><p>Taman di puncak tebing dengan panorama laut membentang‚Äîtempat terbaik menyaksikan matahari terbenam.</p></div>
      </div>
      <div class="swiper-slide">
        <img src="./kunawe.png" alt="Ceruk Konawe">
        <div class="slide-caption"><h2>Ceruk Konawe</h2><p>Gua alami peninggalan prasejarah: cap tangan, pola garis, dan temuan sisa tulang manusia.</p></div>
      </div>
    </div>
    <div class="swiper-button-prev"></div>
    <div class="swiper-button-next"></div>
    <div class="swiper-pagination"></div>
  </div>
</section>

<!-- Intro -->
<div class="intro-wisata">
  <p>Keindahan alam Gaya Baru terpancar dari destinasi, laut, flora, dan faunanya‚Äîmenjadi sumber kehidupan dan kebanggaan.</p>
</div>

<!-- ===== Kekayaan Laut ===== -->
<section class="stay-list">
  <div class="container">
    <h2 class="stay-title">Kekayaan Laut</h2>
    <div class="alam-grid">
      <article class="alam-card">
        <img src="./cakalang.png" alt="Ikan Cakalang" class="alam-media">
        <div class="alam-body"><h3 class="alam-name">Ikan Cakalang</h3><p class="alam-sub">Daging padat dan gurih; tangkapan utama nelayan‚Äîsimbol ketekunan pesisir.</p></div>
      </article>
      <article class="alam-card">
        <img src="./tuna.png" alt="Ikan Tuna" class="alam-media">
        <div class="alam-body"><h3 class="alam-name">Ikan Tuna</h3><p class="alam-sub">Raja samudra; jalur migrasi di Laut Flores‚Äîandalan perikanan berkelanjutan.</p></div>
      </article>
      <article class="alam-card">
        <img src="./tongkol.png" alt="Ikan Tongkol" class="alam-media">
        <div class="alam-body"><h3 class="alam-name">Ikan Tongkol</h3><p class="alam-sub">Tangguh dan adaptif; komoditas yang mencerminkan keseimbangan dan kelestarian.</p></div>
      </article>
    </div>
  </div>
</section>

<!-- ===== Kekayaan Flora ===== -->
<section class="stay-list">
  <div class="container">
    <h2 class="stay-title">Kekayaan Flora</h2>
    <div class="alam-grid">
      <article class="alam-card">
        <img src="./rotan.png" alt="Rotan Batang" class="alam-media">
        <div class="alam-body"><h3 class="alam-name">Rotan Batang</h3><p class="alam-sub">Lentur namun kuat; bahan penting kerajinan‚Äîharmoni alam dan budaya.</p></div>
      </article>
      <article class="alam-card">
        <img src="./terumbu.png" alt="Terumbu Karang" class="alam-media">
        <div class="alam-body"><h3 class="alam-name">Terumbu Karang</h3><p class="alam-sub">Taman bawah laut penuh warna; benteng alami pesisir & surga penyelam.</p></div>
      </article>
      <article class="alam-card">
        <img src="./anggrek.png" alt="Anggrek Serat" class="alam-media">
        <div class="alam-body"><h3 class="alam-name">Anggrek Serat</h3><p class="alam-sub">Permata hutan berkelopak halus; daya pikat botani di lereng lembap.</p></div>
      </article>
    </div>
  </div>
</section>

<!-- ===== Kekayaan Fauna ===== -->
<section class="stay-list">
  <div class="container">
    <h2 class="stay-title">Kekayaan Fauna</h2>
    <div class="alam-grid">
      <article class="alam-card">
        <img src="./kangkareng.png" alt="Kangkareng Sulawesi" class="alam-media">
        <div class="alam-body"><h3 class="alam-name">Kangkareng Sulawesi</h3><p class="alam-sub">Paruh besar & suara nyaring; penyebar biji yang menjaga regenerasi hutan.</p></div>
      </article>
      <article class="alam-card">
        <img src="./macaca.png" alt="Monyet Macaca" class="alam-media">
        <div class="alam-body"><h3 class="alam-name">Monyet Macaca</h3><p class="alam-sub">Primata cerdas hidup berkelompok‚Äîindikator ekosistem terjaga.</p></div>
      </article>
      <article class="alam-card">
        <img src="./maleo.png" alt="Burung Maleo" class="alam-media">
        <div class="alam-body"><h3 class="alam-name">Burung Maleo</h3><p class="alam-sub">Endemik Sulawesi; bertelur di pasir panas‚Äînilai konservasi tinggi.</p></div>
      </article>
    </div>
  </div>
</section>

<!-- ===== Peta Wisata ===== -->
<section class="map-section" id="peta">
  <div class="container">
    <h2 class="section-title">Peta Tempat Wisata</h2>
    <div class="map-frame"><div id="leaflet-map"></div></div>
  </div>
</section>

<!-- ===== Footer ===== -->
<footer id="kontak">
  <div class="footer-grid">
    <div>
      <div class="footer-brand">Desa Gaya Baru</div>
      <p class="footer-addr">Kec. Lapandewa, Kab. Buton Selatan, Sulawesi Tenggara</p>
    </div>
    <div>
      <ul class="contact-list">
        <li><a href="https://wa.me/6281323642950">WhatsApp 0813-2364-2950</a></li>
        <li><a href="mailto:info@desagayabaru.id">info@desagayabaru.id</a></li>
      </ul>
      <div class="socials">
        <a class="soc" href="https://facebook.com" aria-label="Facebook">üìò</a>
        <a class="soc" href="https://youtube.com" aria-label="YouTube">‚ñ∂Ô∏è</a>
      </div>
    </div>
    <div><p style="font-style:italic;max-width:42ch">‚ÄúDi pesisir ini, ombak bercerita, angin berbisik, dan kehidupan berjalan dalam harmoni.‚Äù</p></div>
  </div>
  <div class="footer-credits"><small>¬© <span id="year"></span> Desa Gaya Baru</small></div>
</footer>

<!-- ===== Scripts ===== -->
<script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" crossorigin></script>
<script src="https://unpkg.com/leaflet-routing-machine@latest/dist/leaflet-routing-machine.js"></script>
<script src="https://unpkg.com/shpjs@latest/dist/shp.min.js"></script>
<script>
document.getElementById("year").textContent=new Date().getFullYear();

/* Swiper */
new Swiper(".pelukan-slider",{
  loop:true,speed:700,grabCursor:true,effect:"coverflow",centeredSlides:true,slidesPerView:"auto",spaceBetween:40,
  coverflowEffect:{rotate:0,stretch:0,depth:180,modifier:1.2,slideShadows:false},
  navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},
  pagination:{el:".swiper-pagination",clickable:true},
  autoplay:{delay:5000,disableOnInteraction:false},
  breakpoints:{320:{spaceBetween:16},640:{spaceBetween:24},1024:{spaceBetween:40}}
});

/* Leaflet + shpjs + OSRM */
document.addEventListener("DOMContentLoaded",async()=>{
  if(!window.L) return;

  /* Basemap */
  const osm  = L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19});
  const topo = L.tileLayer("https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png",{maxZoom:17});
  const sat  = L.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{maxZoom:19});

  const map = L.map("leaflet-map",{center:[-5.66,122.76],zoom:13,layers:[osm]});
  const layerControl=L.control.layers({OSM:osm,Topografi:topo,Satelit:sat},null,{position:"topright",collapsed:true}).addTo(map);

  /* Titik wisata */
  const locations=[
    {name:"Waburi Park",      coords:[-5.663294086295358,122.76500923206746]},
    {name:"Pantai Kacimbola", coords:[-5.657579664077717,122.7610348916279]},
    {name:"Ceruk Konawe",     coords:[-5.669443346244777,122.76431883050331]}
  ];
  locations.forEach(l=>L.marker(l.coords).addTo(map).bindPopup(`<b>${l.name}</b>`));
  const byName=n=>locations.find(o=>o.name===n);
  const fmtKm=m=>`Jarak: ${(m/1000).toFixed(1)} km`;
  const midpointOnLine=latlngs=>{
    if(!latlngs||latlngs.length<2) return latlngs?.[0];
    let total=0,seg=[];
    for(let i=1;i<latlngs.length;i++){const d=latlngs[i-1].distanceTo(latlngs[i]);seg.push(d);total+=d}
    const half=total/2; let acc=0;
    for(let i=1;i<latlngs.length;i++){
      if(acc+seg[i-1]>=half){
        const t=(half-acc)/seg[i-1],a=latlngs[i-1],b=latlngs[i];
        return L.latLng(a.lat+t*(b.lat-a.lat),a.lng+t*(b.lng-a.lng));
      }
      acc+=seg[i-1];
    }
    return latlngs[Math.floor(latlngs.length/2)];
  };

  /* Skema warna tutupan lahan */
  const norm=s=>String(s||"").toLowerCase().replace(/\s+/g," ").trim();
  const colorFor=leg=>{
    const c=norm(leg), exact={
      "permukiman":{stroke:"#000",fill:"#FFCCBF"},
      "belukar":{stroke:"#000",fill:"#A6FF78"},
      "tanah terbuka":{stroke:"#000",fill:"#ffffff"},
      "savana / padang rumput":{stroke:"#000",fill:"#66BF3B"},
      "kebun campuran":{stroke:"#000",fill:"#BDFFA1"},
      "hutan lahan kering":{stroke:"#000",fill:"#C7E0B0"},
      "hutan mangrove":{stroke:"#000",fill:"#A6FF78"},
      "tubuh air":{stroke:"#00FFFF",fill:"#CCFFFF"}
    };
    if(exact[c]) return exact[c];
    if(c.includes("permuk"))return{stroke:"#000",fill:"#FFCCBF"};
    if(c.includes("belukar"))return{stroke:"#000",fill:"#A6FF78"};
    if(c.includes("terbuka"))return{stroke:"#000",fill:"#ffffff"};
    if(c.includes("savana")||c.includes("padang"))return{stroke:"#000",fill:"#66BF3B"};
    if(c.includes("kebun"))return{stroke:"#000",fill:"#BDFFA1"};
    if(c.includes("mangrove"))return{stroke:"#000",fill:"#A6FF78"};
    if(c.includes("hutan"))return{stroke:"#000",fill:"#C7E0B0"};
    if(c.includes("air")||c.includes("sungai")||c.includes("danau"))return{stroke:"#00FFFF",fill:"#CCFFFF"};
    return{stroke:"#ff7b00",fill:"#ffd9ab"};
  };

  /* Muat shapefile ZIP: pastikan tuplah.zip satu folder dengan file ini */
  async function loadTutupanLahan(){
    const ab=await fetch("./tuplah.zip").then(r=>{if(!r.ok)throw new Error("Gagal memuat tuplah.zip");return r.arrayBuffer()});
    const gj=await shp(ab);
    const tutupan=L.geoJSON(gj,{
      style:f=>{const c=colorFor(f.properties?.Legenda);return{color:c.stroke,weight:1.2,fillColor:c.fill,fillOpacity:.5}},
      onEachFeature:(f,l)=>{
        const p=f.properties||{},leg=p.Legenda||p.name||"Tutupan Lahan",luas=p.Luas??p.luas??p.LUAS;
        const tip=(luas!=null&&String(luas).trim()!=="")?`${leg} ‚Äî Luas: ${luas}`:leg;
        l.bindTooltip(tip,{sticky:true});
        l.bindPopup(`<div style="min-width:240px"><div><b>${leg}</b></div>${luas?`<div>Luas: <b>${luas}</b></div>`:""}</div>`);
      }
    }).addTo(map);
    layerControl.addOverlay(tutupan,"Tutupan Lahan");
    try{map.fitBounds(tutupan.getBounds(),{padding:[18,18]})}catch(e){}
    return tutupan;
  }

  /* Gambar rute & badge jarak (OSRM) */
  function makeRouteOverlay(title,fromName,toName,color="#0b67d0"){
    const A=byName(fromName),B=byName(toName); if(!A||!B) return;
    const group=L.layerGroup();

    L.Routing.control({
      waypoints:[L.latLng(A.coords),L.latLng(B.coords)],
      router:L.Routing.osrmv1({serviceUrl:"https://router.project-osrm.org/route/v1"}),
      showAlternatives:false,fitSelectedRoutes:false,addWaypoints:false,draggableWaypoints:false,routeWhileDragging:false,
      createMarker:()=>null,lineOptions:{styles:[{color:"transparent",weight:0,opacity:0}]}
    })
    .on("routesfound",e=>{
      const r=e.routes[0];
      L.polyline(r.coordinates,{color,weight:5,opacity:.9}).addTo(group);
      const mid=midpointOnLine(r.coordinates),txt=fmtKm(r.summary.totalDistance);
      L.marker(mid,{icon:L.divIcon({className:"",html:`<div class="distance-badge-pin">${txt}</div>`,iconSize:null,iconAnchor:[0,0]}),interactive:false}).addTo(group);
    })
    .addTo(map);

    layerControl.addOverlay(group,title); group.addTo(map);
  }

  await loadTutupanLahan();
  makeRouteOverlay("Pantai Kacimbola ‚Üí Waburi Park","Pantai Kacimbola","Waburi Park");
  makeRouteOverlay("Waburi Park ‚Üí Ceruk Konawe","Waburi Park","Ceruk Konawe");
  L.control.scale({imperial:false}).addTo(map);
});
</script>
</body>
</html>
